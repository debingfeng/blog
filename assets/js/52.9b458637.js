(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{211:function(e,t,n){"use strict";n.r(t);var a=n(0),r=Object(a.a)({},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[e._m(0),e._v(" "),e._m(1),e._v(" "),n("p",[e._v("近期需要做前端页面的性能监控，需要建")]),e._v(" "),e._m(2),e._v(" "),e._m(3),e._m(4),e._v(" "),n("p",[e._v("利用javascript的"),n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/CustomEvent",target:"_blank",rel:"noopener noreferrer"}},[e._v("自定义事件"),n("OutboundLink")],1),e._v(",来模拟监听ajax的错误和超时的事件。")]),e._v(" "),n("p",[n("a",{attrs:{href:"https://caniuse.com/#search=CustomEvent",target:"_blank",rel:"noopener noreferrer"}},[e._v("CustomEvent兼容性"),n("OutboundLink")],1)]),e._v(" "),e._m(5),e._v(" "),e._m(6),e._v(" "),n("p",[n("a",{attrs:{href:"https://yq.aliyun.com/ziliao/20500",target:"_blank",rel:"noopener noreferrer"}},[e._v("JavaScript监听全部Ajax请求的事件详解"),n("OutboundLink")],1)]),e._v(" "),e._m(7),e._v(" "),n("p",[n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/CustomEvent",target:"_blank",rel:"noopener noreferrer"}},[e._v("CustomEvent API MDN"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://www.w3school.com.cn/xmldom/dom_http.asp",target:"_blank",rel:"noopener noreferrer"}},[e._v("XMLHttpRequest 对象API"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/apply",target:"_blank",rel:"noopener noreferrer"}},[e._v("apply与call详解MDN"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"https://segmentfault.com/a/1190000008963017",target:"_blank",rel:"noopener noreferrer"}},[e._v("Laravel 5.4 api 允许跨域访问"),n("OutboundLink")],1)])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"javascript监听所有ajax请求的事件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#javascript监听所有ajax请求的事件","aria-hidden":"true"}},[this._v("#")]),this._v(" JavaScript监听所有Ajax请求的事件")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("需求背景")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("实现源码")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("/**\n * 不支持CustomEvent的polyfill\n */\n;(function () {\n    if (typeof window.CustomEvent === \"function\") return false;\n\n    function CustomEvent(event, params) {\n        params = params || {bubbles: false, cancelable: false, detail: undefined};\n        var evt = document.createEvent('CustomEvent');\n        evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n        return evt;\n    }\n\n    CustomEvent.prototype = window.Event.prototype;\n\n    window.CustomEvent = CustomEvent;\n})();\n\n;(function () {\n\n    function ajaxEventTrigger(event) {\n        var ajaxEvent = new CustomEvent(event, {detail: this });\n        window.dispatchEvent(ajaxEvent);\n    }\n\n    var OldXHR = window.XMLHttpRequest;\n\n    function newXHR() {\n        var realXHR = new OldXHR();\n\n        realXHR.addEventListener('error', function () {\n            ajaxEventTrigger.call(this, 'ajaxError');\n        }, false);\n\n        realXHR.addEventListener('timeout', function () {\n            ajaxEventTrigger.call(this, 'ajaxTimeout');\n        }, false);\n\n\n        realXHR.addEventListener('abort', function () {\n            ajaxEventTrigger.call(this, 'ajaxAbort');\n        }, false);\n\n\n        realXHR.addEventListener('load', function () {\n            ajaxEventTrigger.call(this, 'ajaxLoad');\n        }, false);\n\n        realXHR.addEventListener('loadstart', function () {\n            ajaxEventTrigger.call(this, 'ajaxLoadStart');\n        }, false);\n\n        realXHR.addEventListener('progress', function () {\n            ajaxEventTrigger.call(this, 'ajaxProgress');\n        }, false);\n\n        realXHR.addEventListener('loadend', function () {\n            ajaxEventTrigger.call(this, 'ajaxLoadEnd');\n        }, false);\n\n        realXHR.addEventListener('readystatechange', function () {\n            ajaxEventTrigger.call(this, 'ajaxReadyStateChange');\n        }, false);\n\n        return realXHR;\n    }\n\n    window.XMLHttpRequest = newXHR;\n})();\n\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("实现方法及原理")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"参考文章"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考文章","aria-hidden":"true"}},[this._v("#")]),this._v(" 参考文章")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("参考文章")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("相关知识链接")])])}],!1,null,null,null);t.default=r.exports}}]);